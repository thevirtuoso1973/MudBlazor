steps:
- task: UseDotNet@2
  displayName: Install .NET Core 6.0
  inputs:
    version: '6.0.x'
    includePreviewVersions: 'true'

- task: DotNetCoreCLI@2
  displayName: Test
  inputs:
    command: 'test'
    arguments: '--blame-hang
                --blame-hang-timeout 60s
                /property:GenerateFullPaths=true
                /consoleloggerparameters:NoSummary
                /p:CollectCoverage=true
                /p:CoverletOutputFormat=cobertura
                /p:ExcludeByAttribute="ExcludeFromCodeCoverage"
                /p:Include="[MudBlazor]*"
                /p:SkipAutoProps=true
                /p:CoverletOutput="./TestResults/"'
    projects: 'src/MudBlazor.UnitTests/MudBlazor.UnitTests.csproj'
    testRunTitle: 'UnitTest'
    
- task: PublishCodeCoverageResults@1
  inputs:
    codeCoverageTool: 'Cobertura'
    summaryFileLocation: '$(System.DefaultWorkingDirectory)/src/MudBlazor.UnitTests/TestResults/coverage.cobertura.xml'
     
